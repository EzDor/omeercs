---
prompt_id: game_config_from_template
version: 1.0.0
description: Generate game configuration JSON from a template and customization parameters
vars_schema:
  type: object
  properties:
    template_id:
      type: string
      description: The game template ID (e.g., spin_wheel, scratch_card)
    theme:
      type: string
      description: Theme for the game (e.g., "summer beach", "retro arcade")
    difficulty:
      type: object
      properties:
        level:
          type: string
        win_probability:
          type: number
    color_scheme:
      type: object
      properties:
        primary:
          type: string
        secondary:
          type: string
        background:
          type: string
    copy:
      type: object
      properties:
        title:
          type: string
        instructions:
          type: string
    previous_issues:
      type: string
      description: Pre-formatted list of issues from previous attempt (for retry)
  required:
    - template_id
    - theme
    - difficulty
model_defaults:
  model: gemini-2.0-flash-lite
  temperature: 0.5
  max_tokens: 4000
output_schema:
  type: object
  required:
    - template_id
    - version
    - settings
    - visuals
    - audio
    - mechanics
  properties:
    template_id:
      type: string
    version:
      type: string
    settings:
      type: object
      required:
        - duration_sec
        - difficulty
      properties:
        duration_sec:
          type: number
        difficulty:
          type: object
        locale:
          type: string
    visuals:
      type: object
      required:
        - theme
        - colors
      properties:
        theme:
          type: string
        colors:
          type: object
        assets:
          type: object
        animations:
          type: object
    audio:
      type: object
      properties:
        bgm:
          type: object
        sfx:
          type: object
    mechanics:
      type: object
    copy:
      type: object
      properties:
        title:
          type: string
        instructions:
          type: string
        win_message:
          type: string
        lose_message:
          type: string
---
You are a game configuration expert. Generate a complete, valid game configuration JSON for the specified template.

## Template
{template_id}

## Theme
{theme}

## Difficulty Settings
{difficulty}

## Color Scheme
{color_scheme}

## Copy/Text Content
{copy}

## Previous Attempt Feedback
{previous_issues}

## Instructions
Generate a complete game configuration object with the following EXACT structure:
1. **template_id**: The template being configured
2. **version**: Configuration version (use "1.0.0")
3. **settings**: Game settings including duration (default 30 seconds) and difficulty
4. **visuals**: Must include "theme" (string), "colors" (object with primary/secondary/background properties - use the values from color_scheme above), "assets" (object), and "animations" (object)
5. **audio**: BGM and SFX placeholder configurations
6. **mechanics**: Template-specific game mechanics (e.g., for spin_wheel: segments, rotation speed, etc.)
7. **copy**: Text content for title, instructions, win/lose messages

IMPORTANT: The visuals.colors field MUST be named "colors", NOT "color_scheme". Map the input color_scheme values to the output colors object.

For the {template_id} template, include appropriate mechanics:
- spin_wheel: segments (array with labels and prizes), rotation_speed, friction
- scratch_card: grid_size, reveal_threshold, prize_distribution
- slot_machine: reels (symbols per reel), paylines, spin_duration
- memory_match: grid_size, card_pairs, flip_duration
- catch_game: spawn_rate, fall_speed, basket_width
- quiz: questions (array), time_per_question, scoring

Respond with valid JSON only, no additional text or markdown formatting.
